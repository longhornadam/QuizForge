# Module Creation API Development Goals

**Focus:** Automate Canvas LMS module scaffolding (modules, headers, pages, files, external tools) so QuizForge concepts can publish complete learning paths.

---

## 1. Core Objectives
- Generate modules with standardized naming and ordering conventions.
- Insert module items programmatically (headers, pages, assignments, quizzes, external URLs, files).
- Upload and attach supporting files (slides, handouts, media) to module steps.
- Support optional prerequisites and completion requirements.
- Provide idempotent updates (re-run without duplicating content).

---

## 2. Key Canvas APIs to Master
- `POST /api/v1/courses/:course_id/modules` – create module shells.
- `POST /api/v1/courses/:course_id/modules/:module_id/items` – add module items (type-specific payloads).
- `POST /api/v1/courses/:course_id/files` – upload artifacts before linking them.
- `GET /api/v1/courses/:course_id/folders/by_path/*full_path` – target correct file folders.
- `PUT /api/v1/courses/:course_id/modules/:module_id` – publish, reorder, set prerequisites.
- `DELETE /api/v1/courses/:course_id/modules/:module_id/items/:id` – cleanup utilities.

---

## 3. Prototype Milestones
1. **Read-Only Recon** – fetch existing modules/items to understand course structure.
2. **Module Shell Creator** – script that guarantees a module exists (create-if-missing behavior).
3. **Item Inserter** – add sequence of items (header + page + external tool) with ordering controls.
4. **File Pipeline** – upload local assets, confirm availability, then attach to module items.
5. **Completion Rules** – set requirements (view, submit, score) and prerequisites between modules.
6. **State Sync** – diff local plan vs. Canvas state to update or archive items cleanly.

---

## 4. Automation Patterns to Explore
- **Blueprint JSON** – YAML/JSON description of target module used as declarative input for builder.
- **Template Pages** – store HTML fragments/snippets locally, push via `POST /wiki_pages` before linking.
- **Module Bundles** – group assets (files + assessments) generated by QuizForge and register them cohesively.
- **Audit Logs** – capture responses (module IDs, item IDs) for rollback or later updates.

---

## 5. Edge Cases & Constraints
- Rate limits when batch-creating items (consider throttling).
- Linking to quizzes/assignments requires knowing Canvas IDs (coordinate with other dev tracks).
- Re-running scripts must detect existing items and update in place instead of duplicating.
- Publishing status (draft vs. published) should be configurable per module/item.

---

## 6. Suggested Next Experiments
1. Build `list_modules.py` to log module → item tree from a target course.
2. Create `ensure_module.py` that accepts a JSON blueprint and synchronizes module shell + headers.
3. Prototype file upload + module attachment workflow using a small PDF asset.
4. Investigate attaching external tool items (e.g., Office 365 LTI) via module item API.
5. Document best practices for combining QuizForge-generated quizzes with module agendas.
